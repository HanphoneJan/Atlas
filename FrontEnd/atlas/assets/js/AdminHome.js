import{d as e,u as a,r as l,m as t,a as s,e as n,b as u,h as o,w as d,p as i,F as r,y as c,l as m,k as v,o as h,i as f,t as p,j as _,q as g,B as k,C as y,_ as x,x as w}from"./index.js";import{E as b}from"./api.js";const C={class:"nav-container"},A={class:"search_input"},E={key:0,class:"search-suggestions"},T=["onClick"],j=x(e({__name:"AdminNav",setup(e){const x=a(),w=l("1"),j=m(),L=l(!1),S=l(""),V=l([]);t((()=>{const e=document.documentElement.classList;"dark"===x.theme?(document.documentElement.classList.add("dark-theme"),e.add("dark")):(document.documentElement.classList.remove("dark-theme"),e.remove("dark"))}));const q={1:"/admin/atlas",2:"/admin/tag",3:"/admin/user",4:"/index",5:"/upload"},z=e=>{const a=q[e],l=a.slice(1);a?(j.push(a),x.changePage(l)):console.warn(`没有找到路由: ${e}`)},B=()=>{x.logout(),j.push("/")},F=()=>{"dark"===x.theme?x.changeTheme("light"):x.changeTheme("dark")},H=async()=>{if(!S.value.trim())return V.value=[],void(L.value=!1);L.value=!0;try{V.value=await I(S.value)}catch(e){console.error("搜索错误:",e.message),V.value=[]}finally{L.value=!1}},I=async e=>{try{const a={query:e},l=await v.post(b.SEARCH,a);if(830===l.data.status){return Array.isArray(l.data.data)?l.data.data:[]}return[]}catch(a){return console.error("获取图集数据失败:",a.message),[]}},N=()=>{L.value=!0};let P;return(e,a)=>{const l=o("el-menu-item"),t=o("el-menu"),m=o("el-input"),v=o("el-button"),b=o("el-icon");return h(),s("div",C,[n(t,{"default-active":w.value,class:"el-menu-demo",mode:"horizontal",onSelect:z},{default:d((()=>[n(l,{index:"1"},{default:d((()=>a[2]||(a[2]=[f("管理照片")]))),_:1}),n(l,{index:"2"},{default:d((()=>a[3]||(a[3]=[f("管理标签")]))),_:1}),n(l,{index:"3"},{default:d((()=>a[4]||(a[4]=[f("管理用户")]))),_:1}),n(l,{index:"4"},{default:d((()=>a[5]||(a[5]=[f("照片墙")]))),_:1}),n(l,{index:"5"},{default:d((()=>a[6]||(a[6]=[f("上传")]))),_:1})])),_:1},8,["default-active"]),u("div",A,[n(m,{onFocus:N,onBlur:a[0]||(a[0]=e=>(clearTimeout(P),void(P=setTimeout((()=>{L.value=!1,V.value=[]}),200)))),class:"search",placeholder:"请输入内容","prefix-icon":"Search",modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),onInput:H,size:"small",clearable:""},null,8,["modelValue"]),!L.value&&V.value.length?(h(),s("ul",E,[(h(!0),s(r,null,c(V.value,(e=>(h(),s("li",{key:e.id,onClick:a=>{return l=e.path,window.location.href=l,L.value=!1,void(V.value=[]);var l}},[u("a",null,p(e.title),1)],8,T)))),128))])):i("",!0)]),n(v,{class:"login-button",onClick:B},{default:d((()=>a[7]||(a[7]=[f("退出登录")]))),_:1}),n(v,{class:"theme-toggle-button",onClick:F},{default:d((()=>["dark"===g(x).theme?(h(),_(b,{key:0,class:"is-loading"},{default:d((()=>[n(g(k))])),_:1})):(h(),_(b,{key:1,class:"is-loading"},{default:d((()=>[n(g(y))])),_:1}))])),_:1})])}}}),[["__scopeId","data-v-6bd774f9"]]),L=e({__name:"AdminHome",setup:e=>(w((()=>{console.log("管理员界面挂载")})),(e,a)=>{const l=o("router-view"),t=o("el-main");return h(),s(r,null,[u("div",null,[n(j)]),n(t,null,{default:d((()=>[n(l)])),_:1})],64)})});export{L as default};
