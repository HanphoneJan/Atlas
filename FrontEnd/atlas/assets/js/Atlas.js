import{d as e,r as s,x as a,h as l,j as t,o as i,w as o,a as c,y as n,b as r,F as d,_ as u,c as v,k as g,m as w,T as m,e as h,i as p,t as f,q as k}from"./index.js";import{E as y}from"./api.js";const _=["src"],x=u(e({__name:"SlideShow",setup(e){const u=s([]);return a((async()=>{for(let e=1;e<=4;e++){const s=`https://www.hanphone.top/storage/atlas/bg_${e}.jpg`;u.value.push({id:e,img:s})}})),(e,s)=>{const a=l("el-carousel-item"),v=l("el-carousel");return i(),t(v,{interval:5e3,arrow:"always",id:"carousel"},{default:o((()=>[(i(!0),c(d,null,n(u.value,(e=>(i(),t(a,{key:e.id},{default:o((()=>[r("img",{src:e.img,class:"carousel-image"},null,8,_)])),_:2},1024)))),128))])),_:1})}}}),[["__scopeId","data-v-cba18c11"]]),b={key:"welcome-page"},C={class:"tit"},D={class:"intro"},E={class:"tag-filter"},T={class:"tags-container"},B={class:"atlas-container",id:"atlas-container"},G={class:"masonry-columns"},L={class:"img-title"},S={class:"likesWarpper"},z=["src"],I={class:"likes"},V={class:"img-description"},W=u(e({__name:"Atlas",setup(e){const u=s([]),_=s([]),W=s([]),j=s([]);let A;const N=s("这是寒枫的照片墙，你可以自由上传图片！"),P=s("欢迎来到寒枫の照片墙");a((async()=>{F(),O(),q()}));const M=v((()=>[...u.value.filter((e=>j.value.includes(e.id))),...u.value.filter((e=>!j.value.includes(e.id)))])),O=async()=>{try{const e=await g.get(y.SHOW);830===e.data.status&&(_.value=e.data.data,W.value=[..._.value].sort(((e,s)=>s.likes-e.likes)))}catch(e){console.error("获取图集数据失败：",e.message)}},F=async()=>{try{const e=await g.get(y.GETTAG);830===e.data.status&&(u.value=e.data.data)}catch(e){console.error("获取标签列表失败:",e.message)}},U=v((()=>{const e=j.value.map((e=>Number(e)));if(console.log("选中的标签:",e),0===e.length)return W.value;return W.value.filter((s=>{const a=e.every((e=>s.tags.some((s=>null!==s.id&&Number(s.id)===e))));return console.log(`检查图集项 ${s.id}, 是否符合所有选中标签:`,a),a}))})),Y=()=>{const e=document.getElementById("atlas-container");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},$=()=>{clearTimeout(A),Y()},q=()=>{A=setTimeout((()=>{Y()}),3e3)};return w((()=>{const e=()=>{window.innerWidth<768?P.value="寒枫の照片墙":P.value="欢迎来到寒枫の照片墙"};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})),(e,s)=>{const a=l("ArrowDownBold"),u=l("el-icon"),v=l("el-card"),w=l("el-col"),_=l("el-row"),W=l("el-tag"),A=l("el-image");return i(),t(m,{name:"fade",mode:"out-in"},{default:o((()=>[r("div",b,[h(_,{style:{height:"95vh"},class:"welcome-row"},{default:o((()=>[h(w,{span:24,style:{height:"100%"}},{default:o((()=>[h(v,{shadow:"hover",class:"welcome"},{default:o((()=>[r("h1",C,[p(f(P.value)+" ",1),s[0]||(s[0]=r("div",{class:"border"},null,-1))]),r("h2",D,f(N.value),1),r("div",{class:"bounce down",onClick:$},[h(u,{style:{color:"white"}},{default:o((()=>[h(a)])),_:1})])])),_:1})])),_:1})])),_:1}),h(x),r("div",E,[r("div",null,[r("div",T,[s[1]||(s[1]=r("div",{class:"tags-title"}," 标签 ",-1)),(i(!0),c(d,null,n(M.value,((e,s)=>(i(),t(W,{key:e.id,type:j.value.includes(e.id)?"success":"info",size:"default",closable:j.value.includes(e.id),onClick:s=>{return a=e.id,void(j.value.includes(a)?j.value=j.value.filter((e=>e!==a)):j.value.push(a));var a},onClose:e=>(e=>{j.value.splice(e,1)})(s),class:"tag-item",clearable:"false"},{default:o((()=>[p(f(e.name),1)])),_:2},1032,["type","closable","onClick","onClose"])))),128))])])]),r("div",B,[r("div",G,[(i(!0),c(d,null,n(U.value,(e=>(i(),c("div",{key:e.id,class:"grid-item"},[h(v,{"body-style":{padding:"0px"}},{default:o((()=>[h(A,{src:e.path,class:"image",lazy:"","preview-teleported":"","preview-src-list":[e.path]},null,8,["src","preview-src-list"]),r("div",null,[r("span",L,"标题："+f(e.title)+" 作者："+f(e.author),1),r("div",S,[h(u,{id:"heart-icon",onClick:s=>(e=>{e.isLiked||g.post(y.LIKES,{id:e.id}).then((s=>{830===s.data.status?(e.isLiked=!0,e.likes++,console.log(s.data.message)):console.error("点赞失败:",s.data.message)})).catch((e=>{console.error("点赞失败:",e.message)}))})(e)},{default:o((()=>[r("img",{src:e.isLiked?k("data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1738578563504'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2616'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M512%20901.746939c-13.583673%200-26.122449-4.179592-37.093878-13.061225-8.881633-7.314286-225.697959-175.020408-312.424489-311.379592C133.746939%20532.37551%2094.040816%20471.24898%2094.040816%20384.522449c0-144.718367%20108.146939-262.269388%20240.326531-262.269388%2067.395918%200%20131.657143%2030.82449%20177.632653%2084.636735%2045.453061-54.334694%20109.191837-84.636735%20177.110204-84.636735%20132.702041%200%20240.326531%20117.55102%20240.326531%20262.269388%200%2085.159184-37.093878%20143.673469-67.395919%20191.216327l-1.044898%201.567346c-86.726531%20136.359184-303.542857%20304.587755-312.424489%20311.379592-10.44898%208.359184-22.987755%2013.061224-36.571429%2013.061225z'%20fill='%23E5404F'%20p-id='2617'%3e%3c/path%3e%3c/svg%3e"):k("data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1741606804524'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5202'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M707.392%2093.355c-77.264%200-149.104%2038.759-196.389%20102.673-47.258-63.929-119.083-102.673-196.389-102.673-139.281%200-252.596%20123.888-252.596%20276.181%200%2090.853%2040.585%20154.588%2073.209%20205.797%2094.816%20148.743%20333.217%20333.849%20343.314%20341.653%209.727%207.52%2021.1%2011.282%2032.447%2011.282%2011.373%200%2022.73-3.761%2032.447-11.282%2010.11-7.804%20248.524-192.91%20343.313-341.653%2032.64-51.209%2073.238-114.944%2073.238-205.797-0.001-152.292-113.316-276.181-252.596-276.181zM840.628%20540.182c-90.254%20141.629-329.64%20326.614-329.64%20326.614s-239.359-184.986-329.641-326.614c-33.296-52.287-63.11-101.983-63.11-170.647%200-118.568%2087.912-214.725%20196.376-214.725%2080.155%200%20148.967%2052.588%20179.494%20127.875l0-0.375%200.082%200c2.274%207.851%208.905%2013.575%2016.798%2013.575%207.921%200%2014.552-5.723%2016.812-13.575l0.232%200c30.597-75.062%2099.313-127.499%20179.359-127.499%20108.438%200%20196.376%2096.157%20196.376%20214.725%200%2068.663-29.816%20118.359-63.14%20170.647z'%20fill='%23A9B7B7'%20p-id='5203'%3e%3c/path%3e%3c/svg%3e"),alt:"heart",style:{width:"1em",height:"1em"}},null,8,z)])),_:2},1032,["onClick"])]),r("div",I,"点赞："+f(e.likes),1)]),r("div",V,[r("span",null,"简介："+f(e.description),1)])])),_:2},1024)])))),128))])])])])),_:1})}}}),[["__scopeId","data-v-459c01bc"]]);export{W as default};
